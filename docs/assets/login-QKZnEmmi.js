import{V as b,_ as x}from"./VForm-Bpg7AMOW.js";import{r as m,c as y,d as i,b as e,m as a,e as t,F as h,j as C,o as c,E as k,f as I,l as B,s as g,t as N,a1 as S,Z as F}from"./index-C-xlQzkq.js";import{s as j}from"./supabase-C-KNrmI0.js";import{V as P}from"./VNodeRenderer-D3VYXbSu.js";import{V,a as p}from"./VRow-jMKr1l-u.js";import{V as R}from"./VCard-DMvF_pX3.js";import{V as v}from"./VCardText-CgZQ0OWB.js";import{V as T}from"./VAlert-CUGoBOw9.js";import"./VTextField-CXQrcE2A.js";import"./VImg-D3LcUdbl.js";import"./forwardRefs-DWGaNmQL.js";import"./_commonjsHelpers-BosuxZz1.js";/* empty css              */import"./VAvatar-C81wCET_.js";const U={href:"javascript:void(0)"},A={class:"auth-logo d-flex align-center gap-x-3"},X={__name:"login",setup(E){const o=m({username:"",password:"",remember:!1}),n=m(!1),r=m(!1),l=m(""),_=C(),w=async()=>{l.value="",r.value=!0;try{const{data:u,error:s}=await j.from("users").select("id, username, password").eq("username",o.value.username).single();if(s||!u){l.value="Invalid username or password.",r.value=!1;return}if(o.value.password!==u.password){l.value="Invalid username or password.",r.value=!1;return}localStorage.setItem("is_signed","true"),localStorage.setItem("user_name",o.value.username),console.log(localStorage.getItem("user_name")),_.push("/admin/pages")}catch{l.value="Login failed. Please try again."}r.value=!1};return(u,s)=>{const f=x;return c(),y(h,null,[i("a",U,[i("div",A,[e(a(P),{nodes:a(k).app.logo},null,8,["nodes"])])]),e(V,{"no-gutters":"",class:"auth-wrapper bg-surface"},{default:t(()=>[e(p,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:t(()=>[e(R,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-6",width:"calc(100% - 48px)"},{default:t(()=>[e(v,null,{default:t(()=>s[3]||(s[3]=[i("h4",{class:"text-h4 mb-1"}," Welcome! 👋🏻 ",-1)])),_:1}),e(v,null,{default:t(()=>[a(l)?(c(),I(T,{key:0,type:"error",class:"mb-4",variant:"tonal"},{default:t(()=>[g(N(a(l)),1)]),_:1})):B("",!0),e(b,{onSubmit:S(w,["prevent"])},{default:t(()=>[e(V,null,{default:t(()=>[e(p,{cols:"12"},{default:t(()=>[e(f,{modelValue:a(o).username,"onUpdate:modelValue":s[0]||(s[0]=d=>a(o).username=d),autofocus:"",label:"Username",type:"text",placeholder:"yourusername"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12"},{default:t(()=>[e(f,{modelValue:a(o).password,"onUpdate:modelValue":s[1]||(s[1]=d=>a(o).password=d),label:"Password",placeholder:"············",type:a(n)?"text":"password",autocomplete:"password","append-inner-icon":a(n)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[2]||(s[2]=d=>n.value=!a(n))},null,8,["modelValue","type","append-inner-icon"]),e(F,{block:"",type:"submit",loading:a(r),disabled:a(r),class:"mt-6"},{default:t(()=>s[4]||(s[4]=[g(" Login ")])),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}}};export{X as default};
