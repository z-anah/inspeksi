import{s as S}from"./supabase-CWX7-f5Q.js";import{_ as z,a as L}from"./products-sidebar-copy-l6xWoD_n.js";import{F as W}from"./front-page-footer-C8_XRPf9.js";import{u as D,N as Q,V as U}from"./front-page-navbar-CNf69CCQ.js";import{a2 as $,r as l,W as j,D as E,c as d,b as r,d as o,e as i,F as H,o as n,f as M,l as I,s as v,t as P,aT as Y,Y as Z,Z as G,m as J}from"./index-BVaCrnzn.js";import{V as K}from"./VAlert-MBTrk8nU.js";import{V as O,a as T}from"./VRow-Bf1RpIGn.js";import{V as X}from"./VChip-CTV-joSr.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VCard-DP_E-bLX.js";import"./VAvatar-CAUdbu1Q.js";import"./VImg-NMXwL6VU.js";import"./VCardText-C0u32w7U.js";import"./VSpacer-Bit_ZuBw.js";/* empty css              */import"./VDialog-BeMnzwkX.js";import"./VOverlay-BHHiyy6m.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-DRLORRw0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VNodeRenderer-BGktGJC_.js";import"./vue3-perfect-scrollbar-BbB_480w.js";import"./VBadge-iFakTt9B.js";import"./VTooltip-Cpmn-9Bt.js";import"./VDivider-GgTk6SUH.js";import"./VMenu-BuGwhRKA.js";import"./VList-Dvybo9DS.js";const ee={class:"landing-page-wrapper"},te={class:"products-container"},ae={key:1,class:"text-center py-8"},re={class:"d-flex justify-space-between align-center mb-6"},se={key:0,class:"text-center py-8"},oe={key:1,class:"d-flex flex-column ga-12"},Fe={__name:"products",setup(ie){const q=$();q.skin="default";const p=D(),_=l([]),m=l(""),c=l(!1),k=l([]),s=l({priceRange:[0,2e5],categories:[],inStock:!1,featured:!1}),u=l(""),f=j(()=>{let t=_.value;if(u.value.trim()){const e=u.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return t=t.filter(e=>e.price>=s.value.priceRange[0]&&e.price<=s.value.priceRange[1]),s.value.inStock&&(t=t.filter(e=>e.inStock)),s.value.featured&&(t=t.filter(e=>e.featured)),t}),A=async()=>{c.value=!0,m.value="";const{data:t,error:e}=await S.from("products").select("*, product_images(image_url, is_primary)").gt("stock",0).order("created_at",{ascending:!1});if(e){m.value=e.message,c.value=!1;return}_.value=t.map(a=>{var y,h,b,w,x,C,V,N;return{id:a.id,name:a.name,description:a.description,price:Number(a.price),originalPrice:Number(a.price)*1.2,image:((h=(y=a.product_images)==null?void 0:y.find(g=>g.is_primary))==null?void 0:h.image_url)||((w=(b=a.product_images)==null?void 0:b[0])==null?void 0:w.image_url)||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",category:"Produk",rating:Math.floor(Math.random()*5)+1,reviews:Math.floor(Math.random()*10)+1,inStock:a.stock>0,stock:a.stock,tags:["produk"],featured:Math.random()>.5,primary_image:((C=(x=a.product_images)==null?void 0:x.find(g=>g.is_primary))==null?void 0:C.image_url)||((N=(V=a.product_images)==null?void 0:V[0])==null?void 0:N.image_url)||null}}),k.value=["Produk"],c.value=!1},B=async()=>{const{data:t,error:e}=await S.from("content").select("value").eq("section","contact").eq("key","wa").single();!e&&t&&p.setWhatsAppNumber(t.value)},F=(t,e=1)=>{p.addToCart(t,e)},R=t=>{s.value={...s.value,...t}};return E(()=>{A(),B()}),(t,e)=>(n(),d(H,null,[r(Q),o("div",ee,[o("div",te,[r(U,{class:"py-8",style:{"max-width":"1400px"}},{default:i(()=>[m.value?(n(),M(K,{key:0,type:"error",class:"mb-4"},{default:i(()=>[v(P(m.value),1)]),_:1})):I("",!0),c.value?(n(),d("div",ae,[r(Y,{indeterminate:"",color:"primary",size:"64"}),e[2]||(e[2]=o("div",{class:"mt-4"},"Memuat produk...",-1))])):(n(),M(O,{key:2},{default:i(()=>[r(T,{cols:"12",lg:"4"},{default:i(()=>[r(z,{categories:k.value,filters:s.value,"search-query":u.value,"onUpdate:searchQuery":e[0]||(e[0]=a=>u.value=a),"onUpdate:filters":R},null,8,["categories","filters","search-query"])]),_:1}),r(T,{cols:"12",lg:"8"},{default:i(()=>[o("div",re,[e[3]||(e[3]=o("h1",{class:"text-h3 font-weight-bold"},"Showcase Produk",-1)),r(X,{color:"primary",size:"small"},{default:i(()=>[v(P(f.value.length)+" produk ditemukan ",1)]),_:1})]),f.value.length===0?(n(),d("div",se,[r(Z,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[5]||(e[5]=o("h3",{class:"text-h5 font-weight-medium mb-2"},"Tidak ada produk ditemukan",-1)),e[6]||(e[6]=o("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Coba sesuaikan kriteria pencarian atau filter Anda ",-1)),r(G,{color:"primary",variant:"tonal",onClick:e[1]||(e[1]=()=>{u.value="",s.value.priceRange=[0,2e5]})},{default:i(()=>e[4]||(e[4]=[v(" Hapus semua filter ")])),_:1})])):(n(),d("div",oe,[r(L,{products:f.value,onAddToCart:F,cart:J(p).items},null,8,["products","cart"])]))]),_:1})]),_:1}))]),_:1})]),r(W)])],64))}};export{Fe as default};
