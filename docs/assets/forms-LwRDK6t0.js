import{V as b}from"./VCardText-CgZQ0OWB.js";import{V as L}from"./VTextField-CXQrcE2A.js";import{V as C}from"./VCard-DMvF_pX3.js";import{f as y,o as i,e as a,b as t,d as o,c,F as w,h as N,t as f,a2 as S,r as p,W as _,D as q,l as Q,s as x,aw as $,Y as B,Z as T}from"./index-C-xlQzkq.js";import{V as A,a as M,b as U}from"./VList-B9enBYdJ.js";import{N as z,V as I,F as j}from"./front-page-navbar-DupMiGmS.js";import{s as D}from"./supabase-C-KNrmI0.js";import{V as E}from"./VAlert-CUGoBOw9.js";import{V as G,a as V}from"./VRow-jMKr1l-u.js";import{V as P}from"./VChip-DLX0FH4V.js";import"./VImg-D3LcUdbl.js";import"./forwardRefs-DWGaNmQL.js";import"./VAvatar-C81wCET_.js";import"./ssrBoot-DqILwD_A.js";import"./VDivider-BbcLStEO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */import"./VNodeRenderer-D3VYXbSu.js";import"./vue3-perfect-scrollbar-BF0KCMzH.js";import"./VBadge-4CEpyL9c.js";import"./VTooltip-Bxb1C5cp.js";import"./VOverlay-BN_ImGxi.js";import"./VMenu-CagPrsXX.js";import"./VSpacer-Co8pGMD-.js";import"./_commonjsHelpers-BosuxZz1.js";const J={__name:"forms-header-copy",props:{categories:{type:Array,required:!0},searchQuery:{type:String,default:""},filterCategory:{type:String,default:""}},emits:["update:searchQuery","update:filterCategory"],setup(v,{emit:h}){return(u,s)=>(i(),y(C,null,{default:a(()=>[t(b,{class:"pa-6"},{default:a(()=>[s[1]||(s[1]=o("h4",{class:"text-h6 font-weight-medium mb-4"},"Search Forms",-1)),t(L,{"model-value":v.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=n=>u.$emit("update:searchQuery",n)),placeholder:"Search forms...","prepend-inner-icon":"tabler-search",variant:"outlined","hide-details":""},null,8,["model-value"])]),_:1})]),_:1}))}},R={class:"text-body-2 text-medium-emphasis me-2"},W=["href"],Y={__name:"list-group-layout",props:{forms:{type:Array,required:!0}},setup(v){return(h,u)=>(i(),y(C,null,{default:a(()=>[t(b,{class:"pa-6"},{default:a(()=>[u[0]||(u[0]=o("h2",{class:"text-h6 font-weight-medium mb-4"},"List group",-1)),t(A,{class:"pa-0"},{default:a(()=>[(i(!0),c(w,null,N(v.forms,(s,n)=>(i(),y(M,{key:"list-"+s.id,class:"pa-0 mb-2"},{default:a(()=>[t(U,null,{default:a(()=>[o("span",R,f(n+1)+".",1),o("a",{href:s.url,target:"_blank",rel:"noopener",class:"text-primary text-decoration-none"},f(s.title),9,W)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}},Z={class:"forms-container"},H={key:1,class:"text-center py-8"},K={class:"d-flex justify-space-between align-center mb-6"},O={key:0,class:"text-center py-8"},X={key:1,class:"d-flex flex-column ga-6"},ke={__name:"forms",setup(v){const h=S();h.skin="default";const u=p([]),s=p(!1),n=p(""),m=p(""),d=p(""),k=_(()=>[...new Set(u.value.map(l=>l.category))]),g=_(()=>{let l=u.value;if(d.value&&(l=l.filter(e=>e.category===d.value)),m.value.trim()){const e=m.value.trim().toLowerCase();l=l.filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.category.toLowerCase().includes(e))}return l}),F=async()=>{s.value=!0,n.value="";try{const{data:l,error:e}=await D.from("forms").select("*").eq("is_active",!0).order("id",{ascending:!0});if(e){n.value=e.message,console.error("Error fetching forms:",e);return}u.value=l.map(r=>({id:r.id,title:r.title,description:r.description,category:r.category||"General",url:r.link,image:r.image_url||`https://images.unsplash.com/photo-${Math.floor(Math.random()*1e9)}?w=400&h=200&fit=crop`,icon:r.icon||"tabler-forms"}))}catch(l){n.value="Failed to load forms. Please try again later.",console.error("Unexpected error:",l)}finally{s.value=!1}};return q(()=>{F()}),(l,e)=>(i(),c(w,null,[t(z),o("div",Z,[t(I,null,{default:a(()=>[e[8]||(e[8]=o("div",{class:"text-center mb-8"},[o("h1",{class:"text-h2 font-weight-bold mb-4"},"Community Forms"),o("p",{class:"text-h6 text-medium-emphasis mb-6 mx-auto",style:{"max-width":"600px"}}," Get involved in your community. Join events, volunteer, report issues, and make your voice heard through our various forms and initiatives. ")],-1)),n.value?(i(),y(E,{key:0,type:"error",class:"mb-4"},{default:a(()=>[x(f(n.value),1)]),_:1})):Q("",!0),s.value?(i(),c("div",H,[t($,{indeterminate:"",color:"primary",size:"64"}),e[3]||(e[3]=o("div",{class:"mt-4"},"Loading forms...",-1))])):(i(),y(G,{key:2},{default:a(()=>[t(V,{cols:"12",md:"8"},{default:a(()=>[o("div",K,[e[4]||(e[4]=o("h2",{class:"text-h4 font-weight-bold"},"Available Forms",-1)),t(P,{color:"primary",size:"small"},{default:a(()=>[x(f(g.value.length)+" form"+f(g.value.length!==1?"s":"")+" available ",1)]),_:1})]),g.value.length===0&&!s.value?(i(),c("div",O,[t(B,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[6]||(e[6]=o("h3",{class:"text-h5 font-weight-medium mb-2"},"No forms found",-1)),e[7]||(e[7]=o("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Try adjusting your search criteria or category filter ",-1)),t(T,{color:"primary",variant:"tonal",onClick:e[0]||(e[0]=()=>{m.value="",d.value=""})},{default:a(()=>e[5]||(e[5]=[x(" Clear all filters ")])),_:1})])):(i(),c("div",X,[t(Y,{forms:g.value},null,8,["forms"])]))]),_:1}),t(V,{cols:"12",lg:"4"},{default:a(()=>[t(J,{categories:k.value,"search-query":m.value,"onUpdate:searchQuery":e[1]||(e[1]=r=>m.value=r),"filter-category":d.value,"onUpdate:filterCategory":e[2]||(e[2]=r=>d.value=r)},null,8,["categories","search-query","filter-category"])]),_:1})]),_:1}))]),_:1})]),t(j)],64))}};export{ke as default};
