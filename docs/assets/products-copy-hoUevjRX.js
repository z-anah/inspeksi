import{s as S}from"./supabase-BxSmCVBr.js";import{a as L,_ as z}from"./products-sidebar-copy-DiTn8iNa.js";import{u as D,N as U,V as W,F as j}from"./front-page-navbar-CNzEkLth.js";import{a2 as Q,r as l,W as $,D as E,c as p,b as s,d as o,e as i,F as I,o as n,f as M,l as O,s as v,t as y,aU as Y,Y as Z,Z as G,m as H}from"./index-BzTOq7Ev.js";import{V as J}from"./VAlert-BHIxTzdN.js";import{V as K,a as P}from"./VRow-CBi1U2Md.js";import{V as X}from"./VChip-CyIpcbi7.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VCard-BcUD6rkn.js";import"./VAvatar-CvM075Dr.js";import"./VImg-DHOsJsUx.js";import"./VCardText-CmqVAN7p.js";import"./VSpacer-rjBspDpK.js";/* empty css              */import"./VDialog-4zJ358uG.js";import"./VOverlay-DxluCKcU.js";import"./forwardRefs-DWGaNmQL.js";import"./VTextField-BdBNGC4K.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VNodeRenderer-CjLvaiLu.js";import"./vue3-perfect-scrollbar-CRSYaIGx.js";import"./VBadge-C8lkbjie.js";import"./VTooltip-uqQSCKiD.js";import"./VDivider-DUS1y_Cg.js";import"./VMenu-C2BOrrFl.js";import"./VList-ClB2NtNv.js";const ee={class:"landing-page-wrapper"},te={class:"products-container"},ae={key:1,class:"text-center py-8"},re={class:"d-flex justify-space-between align-center mb-6"},se={key:0,class:"text-center py-8"},oe={key:1,class:"d-flex flex-column ga-12"},Fe={__name:"products-copy",setup(ie){const q=Q();q.skin="default";const f=D(),h=l([]),c=l(""),m=l(!1),_=l([]),r=l({priceRange:[0,2e5],categories:[],inStock:!1,featured:!1,minRating:0}),u=l(""),d=$(()=>{let t=h.value;if(u.value.trim()){const e=u.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return t=t.filter(e=>e.price>=r.value.priceRange[0]&&e.price<=r.value.priceRange[1]),r.value.minRating>0&&(t=t.filter(e=>e.rating>=r.value.minRating)),r.value.inStock&&(t=t.filter(e=>e.inStock)),r.value.featured&&(t=t.filter(e=>e.featured)),t}),B=async()=>{m.value=!0,c.value="";const{data:t,error:e}=await S.from("products").select("*, product_images(image_url, is_primary)").gt("stock",0).order("created_at",{ascending:!1});if(e){c.value=e.message,m.value=!1;return}h.value=t.map(a=>{var b,x,k,w,C,V,N,R;return{id:a.id,name:a.name,description:a.description,price:Number(a.price),originalPrice:Number(a.price)*1.2,image:((x=(b=a.product_images)==null?void 0:b.find(g=>g.is_primary))==null?void 0:x.image_url)||((w=(k=a.product_images)==null?void 0:k[0])==null?void 0:w.image_url)||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",category:"Products",rating:Math.floor(Math.random()*5)+1,reviews:Math.floor(Math.random()*10)+1,inStock:a.stock>0,stock:a.stock,tags:["product"],featured:Math.random()>.5,primary_image:((V=(C=a.product_images)==null?void 0:C.find(g=>g.is_primary))==null?void 0:V.image_url)||((R=(N=a.product_images)==null?void 0:N[0])==null?void 0:R.image_url)||null}}),_.value=["Products"],m.value=!1},F=async()=>{const{data:t,error:e}=await S.from("content").select("value").eq("section","contact").eq("key","wa").single();!e&&t&&f.setWhatsAppNumber(t.value)},T=(t,e=1)=>{f.addToCart(t,e)},A=t=>{r.value={...r.value,...t}};return E(()=>{B(),F()}),(t,e)=>(n(),p(I,null,[s(U),o("div",ee,[o("div",te,[s(W,{class:"py-8",style:{"max-width":"1400px"}},{default:i(()=>[e[7]||(e[7]=o("div",{class:"text-center mb-8"},[o("h1",{class:"text-h2 font-weight-bold mb-4"},"Community Marketplace"),o("p",{class:"text-h6 text-medium-emphasis mb-6 mx-auto",style:{"max-width":"600px"}}," Discover quality products from our trusted community vendors. Support local businesses and find everything you need. ")],-1)),c.value?(n(),M(J,{key:0,type:"error",class:"mb-4"},{default:i(()=>[v(y(c.value),1)]),_:1})):O("",!0),m.value?(n(),p("div",ae,[s(Y,{indeterminate:"",color:"primary",size:"64"}),e[2]||(e[2]=o("div",{class:"mt-4"},"Loading products...",-1))])):(n(),M(K,{key:2},{default:i(()=>[s(P,{cols:"12",lg:"8"},{default:i(()=>[o("div",re,[e[3]||(e[3]=o("h2",{class:"text-h4 font-weight-bold"},"Our Products",-1)),s(X,{color:"primary",size:"small"},{default:i(()=>[v(y(d.value.length)+" product"+y(d.value.length!==1?"s":"")+" found ",1)]),_:1})]),d.value.length===0?(n(),p("div",se,[s(Z,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[5]||(e[5]=o("h3",{class:"text-h5 font-weight-medium mb-2"},"No products found",-1)),e[6]||(e[6]=o("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Try adjusting your search criteria or filters ",-1)),s(G,{color:"primary",variant:"tonal",onClick:e[0]||(e[0]=()=>{u.value="",r.value.priceRange=[0,2e5],r.value.minRating=0})},{default:i(()=>e[4]||(e[4]=[v(" Clear all filters ")])),_:1})])):(n(),p("div",oe,[s(L,{products:d.value,onAddToCart:T,cart:H(f).items},null,8,["products","cart"])]))]),_:1}),s(P,{cols:"12",lg:"4"},{default:i(()=>[s(z,{categories:_.value,filters:r.value,"search-query":u.value,"onUpdate:searchQuery":e[1]||(e[1]=a=>u.value=a),"onUpdate:filters":A},null,8,["categories","filters","search-query"])]),_:1})]),_:1}))]),_:1})]),s(j)])],64))}};export{Fe as default};
