import{s as S}from"./supabase-C-KNrmI0.js";import{_ as L,a as z}from"./products-sidebar-copy-U_mJgdFR.js";import{u as W,N as j,V as D,F as Q}from"./front-page-navbar-DupMiGmS.js";import{a2 as U,r as l,W as $,D as E,c as p,b as s,d as o,e as i,F as I,o as n,f as M,l as Y,s as v,t as _,aw as Z,Y as G,Z as H,m as J}from"./index-C-xlQzkq.js";import{V as K}from"./VAlert-CUGoBOw9.js";import{V as O,a as P}from"./VRow-jMKr1l-u.js";import{V as X}from"./VChip-DLX0FH4V.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VCard-DMvF_pX3.js";import"./VAvatar-C81wCET_.js";import"./VImg-D3LcUdbl.js";import"./VCardText-CgZQ0OWB.js";import"./VTextField-CXQrcE2A.js";import"./forwardRefs-DWGaNmQL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */import"./VNodeRenderer-D3VYXbSu.js";import"./vue3-perfect-scrollbar-BF0KCMzH.js";import"./VBadge-4CEpyL9c.js";import"./VTooltip-Bxb1C5cp.js";import"./VOverlay-BN_ImGxi.js";import"./VDivider-BbcLStEO.js";import"./VMenu-CagPrsXX.js";import"./ssrBoot-DqILwD_A.js";import"./VSpacer-Co8pGMD-.js";const ee={class:"landing-page-wrapper"},te={class:"products-container"},ae={key:1,class:"text-center py-8"},re={class:"d-flex justify-space-between align-center mb-6"},se={key:0,class:"text-center py-8"},oe={key:1,class:"d-flex flex-column ga-12"},Be={__name:"products",setup(ie){const q=U();q.skin="default";const f=W(),y=l([]),u=l(""),m=l(!1),h=l([]),r=l({priceRange:[0,1e6],categories:[],inStock:!1,featured:!1,minRating:0}),c=l(""),d=$(()=>{let t=y.value;if(c.value.trim()){const e=c.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return t=t.filter(e=>e.price>=r.value.priceRange[0]&&e.price<=r.value.priceRange[1]),r.value.minRating>0&&(t=t.filter(e=>e.rating>=r.value.minRating)),r.value.inStock&&(t=t.filter(e=>e.inStock)),r.value.featured&&(t=t.filter(e=>e.featured)),t}),B=async()=>{m.value=!0,u.value="";const{data:t,error:e}=await S.from("products").select("*, product_images(image_url, is_primary)").gt("stock",0).order("created_at",{ascending:!1});if(e){u.value=e.message,m.value=!1;return}y.value=t.map(a=>{var k,b,w,x,C,V,N,R;return{id:a.id,name:a.name,description:a.description,price:Number(a.price),originalPrice:Number(a.price)*1.2,image:((b=(k=a.product_images)==null?void 0:k.find(g=>g.is_primary))==null?void 0:b.image_url)||((x=(w=a.product_images)==null?void 0:w[0])==null?void 0:x.image_url)||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",category:"Products",rating:Math.floor(Math.random()*5)+1,reviews:Math.floor(Math.random()*10)+1,inStock:a.stock>0,stock:a.stock,tags:["product"],featured:Math.random()>.5,primary_image:((V=(C=a.product_images)==null?void 0:C.find(g=>g.is_primary))==null?void 0:V.image_url)||((R=(N=a.product_images)==null?void 0:N[0])==null?void 0:R.image_url)||null}}),h.value=["Products"],m.value=!1},F=async()=>{const{data:t,error:e}=await S.from("content").select("value").eq("section","contact").eq("key","wa").single();!e&&t&&f.setWhatsAppNumber(t.value)},T=(t,e=1)=>{f.addToCart(t,e)},A=t=>{r.value={...r.value,...t}};return E(()=>{B(),F()}),(t,e)=>(n(),p(I,null,[s(j),o("div",ee,[o("div",te,[s(D,{class:"py-8",style:{"max-width":"1400px"}},{default:i(()=>[u.value?(n(),M(K,{key:0,type:"error",class:"mb-4"},{default:i(()=>[v(_(u.value),1)]),_:1})):Y("",!0),m.value?(n(),p("div",ae,[s(Z,{indeterminate:"",color:"primary",size:"64"}),e[2]||(e[2]=o("div",{class:"mt-4"},"Loading products...",-1))])):(n(),M(O,{key:2},{default:i(()=>[s(P,{cols:"12",lg:"8"},{default:i(()=>[o("div",re,[e[3]||(e[3]=o("h1",{class:"text-h3 font-weight-bold"},"Product Showcase",-1)),s(X,{color:"primary",size:"small"},{default:i(()=>[v(_(d.value.length)+" product"+_(d.value.length!==1?"s":"")+" found ",1)]),_:1})]),d.value.length===0?(n(),p("div",se,[s(G,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[5]||(e[5]=o("h3",{class:"text-h5 font-weight-medium mb-2"},"No products found",-1)),e[6]||(e[6]=o("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Try adjusting your search criteria or filters ",-1)),s(H,{color:"primary",variant:"tonal",onClick:e[0]||(e[0]=()=>{c.value="",r.value.priceRange=[0,1e6],r.value.minRating=0})},{default:i(()=>e[4]||(e[4]=[v(" Clear all filters ")])),_:1})])):(n(),p("div",oe,[s(L,{products:d.value,onAddToCart:T,cart:J(f).items},null,8,["products","cart"])]))]),_:1}),s(P,{cols:"12",lg:"4"},{default:i(()=>[s(z,{categories:h.value,filters:r.value,"search-query":c.value,"onUpdate:searchQuery":e[1]||(e[1]=a=>c.value=a),"onUpdate:filters":A},null,8,["categories","filters","search-query"])]),_:1})]),_:1}))]),_:1})]),s(Q)])],64))}};export{Be as default};
