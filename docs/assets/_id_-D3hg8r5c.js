import{s as $}from"./supabase-C-KNrmI0.js";import{D as O,c as x,o as g,b as t,e as d,d as i,ap as Z,a6 as R,a7 as j,a8 as M,aa as F,ax as J,W as z,ab as K,p as U,a9 as E,ay as Q,as as ee,X as A,ar as te,az as ae,at as ie,aA as se,au as le,aB as re,Y as P,aC as ne,F as D,l as I,s as V,t as h,h as G,f as S,j as oe,G as ce,v as de,i as Y,r as w,Z as C,a2 as ue,aw as me}from"./index-C-xlQzkq.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as B}from"./VCardText-CgZQ0OWB.js";import{V as L}from"./VCard-DMvF_pX3.js";import{V as H}from"./VChip-DLX0FH4V.js";import{V as N}from"./VImg-D3LcUdbl.js";import{a as q,V as X}from"./VRow-jMKr1l-u.js";import{V as fe,a as ve}from"./VList-B9enBYdJ.js";import{N as he,V as ge,F as pe}from"./front-page-navbar-DupMiGmS.js";import{V as be}from"./VAlert-CUGoBOw9.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-C81wCET_.js";/* empty css              */import"./ssrBoot-DqILwD_A.js";import"./VDivider-BbcLStEO.js";import"./VNodeRenderer-D3VYXbSu.js";import"./vue3-perfect-scrollbar-BF0KCMzH.js";import"./VBadge-4CEpyL9c.js";import"./VTooltip-Bxb1C5cp.js";import"./VOverlay-BN_ImGxi.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-CagPrsXX.js";import"./VSpacer-Co8pGMD-.js";const ye=["innerHTML"],xe={__name:"article-content",props:{content:{type:String,required:!0}},setup(e){const f=()=>{Z(()=>{document.querySelectorAll(".article-content h1, .article-content h2, .article-content h3").forEach(l=>{const r=l.textContent.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");l.id=r})})};return O(()=>{f()}),(a,l)=>(g(),x("section",null,[t(L,null,{default:d(()=>[t(B,{class:"pa-8"},{default:d(()=>[i("div",{class:"article-content text-body-1",innerHTML:e.content,onVnodeUpdated:f},null,8,ye)]),_:1})]),_:1})]))}},we=W(xe,[["__scopeId","data-v-0a6251a5"]]),_e=j({divider:[Number,String],...F()},"VBreadcrumbsDivider"),ke=R()({name:"VBreadcrumbsDivider",props:_e(),setup(e,f){let{slots:a}=f;return M(()=>{var l;return t("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((l=a==null?void 0:a.default)==null?void 0:l.call(a))??e.divider])}),{}}}),Ce=j({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...F(),...Q(),...E({tag:"li"})},"VBreadcrumbsItem"),$e=R()({name:"VBreadcrumbsItem",props:Ce(),setup(e,f){let{slots:a,attrs:l}=f;const n=J(e,l),r=z(()=>{var c;return e.active||((c=n.isActive)==null?void 0:c.value)}),p=z(()=>r.value?e.activeColor:e.color),{textColorClasses:y,textColorStyles:m}=K(p);return M(()=>t(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":r.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:r.value&&e.activeClass},y.value,e.class],style:[m.value,e.style],"aria-current":r.value?"page":void 0},{default:()=>{var c,o;return[n.isLink.value?t("a",U({class:"v-breadcrumbs-item--link",onClick:n.navigate},n.linkProps),[((o=a.default)==null?void 0:o.call(a))??e.title]):((c=a.default)==null?void 0:c.call(a))??e.title]}})),{}}}),Ve=j({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:re,items:{type:Array,default:()=>[]},...F(),...le(),...se(),...E({tag:"ul"})},"VBreadcrumbs"),Se=R()({name:"VBreadcrumbs",props:Ve(),setup(e,f){let{slots:a}=f;const{backgroundColorClasses:l,backgroundColorStyles:n}=ee(A(e,"bgColor")),{densityClasses:r}=te(e),{roundedClasses:p}=ae(e);ie({VBreadcrumbsDivider:{divider:A(e,"divider")},VBreadcrumbsItem:{activeClass:A(e,"activeClass"),activeColor:A(e,"activeColor"),color:A(e,"color"),disabled:A(e,"disabled")}});const y=z(()=>e.items.map(m=>typeof m=="string"?{item:{title:m},raw:m}:{item:m,raw:m}));return M(()=>{const m=!!(a.prepend||e.icon);return t(e.tag,{class:["v-breadcrumbs",l.value,r.value,p.value,e.class],style:[n.value,e.style]},{default:()=>{var c;return[m&&t("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?t(ne,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):t(P,{key:"prepend-icon",start:!0,icon:e.icon},null)]),y.value.map((o,b,T)=>{var s;let{item:_,raw:u}=o;return t(D,null,[((s=a.item)==null?void 0:s.call(a,{item:_,index:b}))??t($e,U({key:b,disabled:b>=T.length-1},typeof _=="string"?{title:_}:_),{default:a.title?()=>{var v;return(v=a.title)==null?void 0:v.call(a,{item:_,index:b})}:void 0}),b<T.length-1&&t(ke,null,{default:a.divider?()=>{var v;return(v=a.divider)==null?void 0:v.call(a,{item:u,index:b})}:void 0})])}),(c=a.default)==null?void 0:c.call(a)]}})}),{}}}),Ae={class:"mb-6"},Be={class:"text-h3 font-weight-bold mb-2"},Le={class:"text-h6 text-medium-emphasis mb-4"},Pe={class:"d-flex align-center flex-wrap ga-4 mb-6"},ze={class:"d-flex align-center ga-4 text-body-2 text-medium-emphasis"},Ie={class:"d-flex align-center ga-1"},Te={class:"d-flex align-center ga-1"},qe={class:"d-flex align-center ga-1"},De={class:"d-flex flex-wrap ga-2 mt-4 mb-4"},Ne={key:0,class:"text-body-1 text-medium-emphasis mb-4"},Re={__name:"article-header",props:{article:{type:Object,required:!0}},setup(e){return(f,a)=>(g(),x("section",null,[t(Se,{items:[{title:"Home",to:"/"},{title:"Articles",to:"/articles"},{title:e.article.title,disabled:!0}],class:"pa-0 mb-4"},null,8,["items"]),i("div",Ae,[t(H,{color:"primary",size:"small",class:"mb-3"},{default:d(()=>[V(h(e.article.category),1)]),_:1}),i("h1",Be,h(e.article.title),1),i("p",Le,h(e.article.subtitle),1),i("div",Pe,[i("div",ze,[i("div",Ie,[t(P,{icon:"tabler-calendar",size:"16"}),V(" "+h(e.article.date),1)]),i("div",Te,[t(P,{icon:"tabler-clock",size:"16"}),V(" "+h(e.article.readingTime),1)]),i("div",qe,[t(P,{icon:"tabler-eye",size:"16"}),V(" "+h(e.article.views)+" views ",1)])])]),t(N,{src:e.article.featuredImage,alt:e.article.title,height:"400",class:"rounded",cover:""},null,8,["src","alt"]),i("div",De,[(g(!0),x(D,null,G(e.article.tags,l=>(g(),S(H,{key:l,size:"small",variant:"outlined"},{default:d(()=>[V(" #"+h(l),1)]),_:2},1024))),128))]),e.article.excerpt?(g(),x("p",Ne,h(e.article.excerpt),1)):I("",!0)])]))}},je={style:{width:"60px",height:"60px"}},Me={class:"flex-grow-1 text-right"},Fe={class:"text-body-1 font-weight-medium"},He={class:"flex-grow-1"},Oe={class:"text-body-1 font-weight-medium"},Ue={style:{width:"60px",height:"60px"}},Ee={__name:"article-navigation",props:{navigation:{type:Object,required:!0}},setup(e){const f=oe(),a=async l=>{await f.push(`/articles/${l}`),f.go(0)};return(l,n)=>(g(),x("section",null,[t(X,null,{default:d(()=>[e.navigation.previous?(g(),S(q,{key:0,cols:"12",md:"6"},{default:d(()=>[t(L,{class:"h-100 cursor-pointer",hover:"",onClick:n[0]||(n[0]=r=>a(e.navigation.previous.id))},{default:d(()=>[t(B,{class:"d-flex ga-3"},{default:d(()=>[i("div",je,[t(N,{src:e.navigation.previous.image,alt:e.navigation.previous.title,width:"60",height:"60",class:"flex-shrink-0 rounded",cover:""},null,8,["src","alt"])]),i("div",Me,[n[2]||(n[2]=i("p",{class:"text-caption text-medium-emphasis mb-1"},"Previous Article",-1)),i("h4",Fe,h(e.navigation.previous.title),1)])]),_:1})]),_:1})]),_:1})):I("",!0),e.navigation.next?(g(),S(q,{key:1,cols:"12",md:"6"},{default:d(()=>[t(L,{class:"h-100 cursor-pointer",hover:"",onClick:n[1]||(n[1]=r=>a(e.navigation.next.id))},{default:d(()=>[t(B,{class:"d-flex ga-3"},{default:d(()=>[i("div",He,[n[3]||(n[3]=i("p",{class:"text-caption text-medium-emphasis mb-1"},"Next Article",-1)),i("h4",Oe,h(e.navigation.next.title),1)]),i("div",Ue,[t(N,{src:e.navigation.next.image,alt:e.navigation.next.title,width:"60",height:"60",class:"flex-shrink-0 rounded",cover:""},null,8,["src","alt"])])]),_:1})]),_:1})]),_:1})):I("",!0)]),_:1})]))}},Ge=W(Ee,[["__scopeId","data-v-83c625fe"]]),Ye={class:"d-flex flex-column ga-6 position-sticky",style:{top:"2rem"}},We={class:"d-flex flex-column ga-3"},Xe={class:"d-flex justify-space-between"},Ze={class:"font-weight-medium"},Je={class:"d-flex justify-space-between"},Ke={class:"font-weight-medium"},Qe={class:"d-flex justify-space-between"},et={class:"font-weight-medium"},tt={__name:"article-sidebar",props:{article:{type:Object,required:!0}},setup(e){const f=e,a=z(()=>{if(!f.article.content)return[];const p=new DOMParser().parseFromString(f.article.content,"text/html").querySelectorAll("h1, h2, h3");return Array.from(p).map((y,m)=>{const c=y.textContent,o=parseInt(y.tagName.charAt(1)),b=`#${c.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`;return{title:c,anchor:b,level:o,indent:o>1?(o-1)*16:0}})}),l=n=>{const r=document.querySelector(n);if(r){const m=r.getBoundingClientRect().top+window.pageYOffset/1.03-80;window.scrollTo({top:m,behavior:"smooth"})}};return(n,r)=>(g(),x("div",Ye,[a.value.length>0?(g(),S(L,{key:0},{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[r[0]||(r[0]=i("h4",{class:"text-h6 font-weight-medium mb-4"},"Table of Contents",-1)),t(fe,{class:"pa-0"},{default:d(()=>[(g(!0),x(D,null,G(a.value,p=>(g(),S(ve,{key:p.anchor,class:"pa-2 text-body-2 cursor-pointer",style:ce({paddingLeft:`${16+p.indent}px`}),onClick:y=>l(p.anchor)},{default:d(()=>[i("span",{class:de([p.level===1?"font-weight-medium":"","text-primary"])},h(p.title),3)]),_:2},1032,["style","onClick"]))),128))]),_:1})]),_:1})]),_:1})):I("",!0),t(L,null,{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[r[4]||(r[4]=i("h4",{class:"text-h6 font-weight-medium mb-4"},"Article Stats",-1)),i("div",We,[i("div",Xe,[r[1]||(r[1]=i("span",{class:"text-body-2"},"Views",-1)),i("span",Ze,h(e.article.views),1)]),i("div",Je,[r[2]||(r[2]=i("span",{class:"text-body-2"},"Likes",-1)),i("span",Ke,h(e.article.likes),1)]),i("div",Qe,[r[3]||(r[3]=i("span",{class:"text-body-2"},"Shares",-1)),i("span",et,h(e.article.shares),1)])])]),_:1})]),_:1})]))}},at={class:"d-flex justify-space-between align-center flex-wrap ga-4"},it={class:"d-flex align-center ga-4"},st={class:"d-flex align-center ga-2"},lt={class:"text-body-2"},rt={class:"d-flex align-center ga-2"},nt={class:"text-body-2"},ot={class:"d-flex align-center ga-2"},ct={class:"text-body-2"},dt={class:"d-flex ga-2"},ut={__name:"sharing-section",props:{article:{type:Object,required:!0}},emits:["update-stats"],setup(e,{emit:f}){const a=e,l=f;Y();const n=w(!1),r=w(!1),p=z(()=>{const c=window.location.href,o=encodeURIComponent(a.article.title);return{twitter:`https://twitter.com/intent/tweet?url=${c}&text=${o}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${c}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${c}`}}),y=async()=>{if(!n.value){n.value=!0;try{const c=a.article.likes+1,{error:o}=await $.from("articles").update({likes:c}).eq("id",a.article.id);o||l("update-stats",{likes:c})}catch(c){console.error("Error updating likes:",c)}finally{n.value=!1}}},m=async c=>{if(!r.value){r.value=!0;try{const o=a.article.shares+1,{error:b}=await $.from("articles").update({shares:o}).eq("id",a.article.id);b||l("update-stats",{shares:o}),window.open(p.value[c],"_blank","width=600,height=400")}catch(o){console.error("Error updating shares:",o)}finally{r.value=!1}}};return(c,o)=>(g(),x("section",null,[t(L,null,{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[i("div",at,[i("div",it,[i("div",st,[t(C,{icon:"tabler-eye",variant:"outlined",size:"small"}),i("span",lt,h(e.article.views.toLocaleString())+" views",1)]),i("div",rt,[t(C,{icon:"tabler-heart",variant:"outlined",size:"small",loading:n.value,onClick:y,color:"error"},null,8,["loading"]),i("span",nt,h(e.article.likes.toLocaleString())+" likes",1)]),i("div",ot,[t(C,{icon:"tabler-share",variant:"outlined",size:"small"}),i("span",ct,h(e.article.shares.toLocaleString())+" shares",1)])]),i("div",dt,[t(C,{icon:"tabler-brand-twitter",variant:"tonal",size:"small",color:"info",loading:r.value,onClick:o[0]||(o[0]=b=>m("twitter"))},null,8,["loading"]),t(C,{icon:"tabler-brand-facebook",variant:"tonal",size:"small",color:"primary",loading:r.value,onClick:o[1]||(o[1]=b=>m("facebook"))},null,8,["loading"]),t(C,{icon:"tabler-brand-linkedin",variant:"tonal",size:"small",color:"info",loading:r.value,onClick:o[2]||(o[2]=b=>m("linkedin"))},null,8,["loading"])])])]),_:1})]),_:1})]))}},mt={class:"article-page-wrapper"},ft={class:"article-container"},vt={key:1,class:"d-flex justify-center align-center py-12"},ht={class:"d-flex flex-column ga-8"},gt={key:3,class:"text-center py-12"},Ft={__name:"[id]",setup(e){const f=ue();f.skin="default";const a=Y(),l=w(null),n=w([]),r=w([]),p=w({}),y=w(!0),m=w(""),c=async u=>{try{const{data:s,error:v}=await $.from("articles").select("*").eq("id",u).single();if(v)throw v;l.value={id:s.id,title:s.title,subtitle:s.subtitle||"",excerpt:s.excerpt||"",author:{name:s.author_name||"Anonymous",role:"Contributor",avatar:s.author_avatar||"https://images.unsplash.com/photo-1494790108755-2616b612b412?w=150&h=150&fit=crop&crop=face",bio:s.author_bio||"Community contributor and writer.",socialLinks:{twitter:"@contributor",linkedin:"contributor"}},date:new Date(s.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),readingTime:`${Math.max(1,Math.ceil((s.excerpt||"").length/200))} min read`,category:s.type||"General",tags:["community","news"],featuredImage:s.image_url||"https://images.unsplash.com/photo-1560472355-536de3962603?w=800&h=400&fit=crop",content:Array.isArray(s.content)?s.content.map(k=>`<p>${k}</p>`).join(""):"<p>Content not available</p>",views:s.views||0,likes:s.likes||0,shares:s.shares||0,comments:Math.floor(Math.random()*30)},await $.from("articles").update({views:(s.views||0)+1}).eq("id",u)}catch(s){m.value=s.message}},o=async(u,s)=>{const{data:v}=await $.from("articles").select("*").eq("type",s).neq("id",u).limit(3);v&&(n.value=v.map(k=>({id:k.id,title:k.title,excerpt:k.excerpt||"Read more about this topic...",image:k.image_url||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop",date:new Date(k.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),readingTime:"5 min read"})))},b=async u=>{const{data:s}=await $.from("articles").select("id, title, image_url").lt("id",u).order("id",{ascending:!1}).limit(1),{data:v}=await $.from("articles").select("id, title, image_url").gt("id",u).order("id",{ascending:!0}).limit(1);p.value={previous:s!=null&&s[0]?{id:s[0].id,title:s[0].title,image:s[0].image_url||"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=100&h=100&fit=crop"}:null,next:v!=null&&v[0]?{id:v[0].id,title:v[0].title,image:v[0].image_url||"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=100&h=100&fit=crop"}:null}},T=async u=>{r.value=[{id:1,author:"Community Member",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face",date:"2 hours ago",content:"Great article! Very informative.",likes:5,replies:[]}]},_=u=>{l.value&&(u.likes!==void 0&&(l.value.likes=u.likes),u.shares!==void 0&&(l.value.shares=u.shares),u.views!==void 0&&(l.value.views=u.views))};return O(async()=>{const u=a.params.id;y.value=!0,await c(u),l.value&&await Promise.all([o(u,l.value.category),b(u),T()]),y.value=!1}),(u,s)=>(g(),x(D,null,[t(he),i("div",mt,[i("div",ft,[t(ge,{class:"py-8",style:{"max-width":"1400px"}},{default:d(()=>[m.value?(g(),S(be,{key:0,type:"error",class:"mb-4"},{default:d(()=>[V(h(m.value),1)]),_:1})):I("",!0),y.value?(g(),x("div",vt,[t(me,{indeterminate:"",color:"primary",size:"48"})])):l.value?(g(),S(X,{key:2},{default:d(()=>[t(q,{cols:"12",lg:"8"},{default:d(()=>[i("div",ht,[t(Re,{article:l.value},null,8,["article"]),t(we,{content:l.value.content},null,8,["content"]),t(ut,{article:l.value,onUpdateStats:_},null,8,["article"]),t(Ge,{navigation:p.value},null,8,["navigation"])])]),_:1}),t(q,{cols:"12",lg:"4"},{default:d(()=>[t(tt,{article:l.value},null,8,["article"])]),_:1})]),_:1})):(g(),x("div",gt,[t(P,{icon:"tabler-article-off",size:"64",class:"text-medium-emphasis mb-4"}),s[1]||(s[1]=i("h2",{class:"text-h4 mb-2"},"Article Not Found",-1)),s[2]||(s[2]=i("p",{class:"text-body-1 text-medium-emphasis mb-4"}," The article you're looking for doesn't exist or has been removed. ",-1)),t(C,{to:"/articles",color:"primary"},{default:d(()=>s[0]||(s[0]=[V(" Back to Articles ")])),_:1})]))]),_:1})]),t(pe)])],64))}};export{Ft as default};
