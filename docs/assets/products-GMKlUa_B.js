import{s as R}from"./supabase-NMqErGf7.js";import{_ as z,a as L}from"./products-sidebar-copy-B1Gy1EqX.js";import{F as W}from"./front-page-footer-DHKiIZKt.js";import{u as D,N as Q,V as U}from"./front-page-navbar-BHbgQ6rD.js";import{a2 as $,r as l,W as j,D as E,c as d,b as s,d as o,e as i,F as H,o as n,f as S,l as I,s as v,t as M,aT as Y,Y as Z,Z as G,m as J}from"./index-Bck-Ahgw.js";import{V as K}from"./VAlert-DWySBJeQ.js";import{V as O,a as P}from"./VRow-Gfvf4SOx.js";import{V as X}from"./VChip-D3L6ne8i.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VCard-Ch2-eywo.js";import"./VAvatar-gDFidPcb.js";import"./VImg-kbl04kjg.js";import"./VCardText-BS5HalG4.js";import"./VTextField-BRPrvh20.js";import"./forwardRefs-DWGaNmQL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */import"./VNodeRenderer-heQyunOw.js";import"./vue3-perfect-scrollbar-BjaNt9j-.js";import"./VBadge-BAaCapJi.js";import"./VTooltip-kWpE0GDz.js";import"./VOverlay-BPwmH8Mb.js";import"./VDivider-CqhMNeab.js";import"./VMenu-CMNuSNyr.js";import"./ssrBoot-Dke95lLm.js";import"./VSpacer-CyQocnEo.js";const ee={class:"landing-page-wrapper"},te={class:"products-container"},ae={key:1,class:"text-center py-8"},re={class:"d-flex justify-space-between align-center mb-6"},se={key:0,class:"text-center py-8"},oe={key:1,class:"d-flex flex-column ga-12"},Ae={__name:"products",setup(ie){const T=$();T.skin="default";const p=D(),_=l([]),m=l(""),c=l(!1),k=l([]),r=l({priceRange:[0,1e6],categories:[],inStock:!1,featured:!1,minRating:0}),u=l(""),f=j(()=>{let t=_.value;if(u.value.trim()){const e=u.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(e)||a.description.toLowerCase().includes(e))}return t=t.filter(e=>e.price>=r.value.priceRange[0]&&e.price<=r.value.priceRange[1]),r.value.minRating>0&&(t=t.filter(e=>e.rating>=r.value.minRating)),r.value.inStock&&(t=t.filter(e=>e.inStock)),r.value.featured&&(t=t.filter(e=>e.featured)),t}),q=async()=>{c.value=!0,m.value="";const{data:t,error:e}=await R.from("products").select("*, product_images(image_url, is_primary)").gt("stock",0).order("created_at",{ascending:!1});if(e){m.value=e.message,c.value=!1;return}_.value=t.map(a=>{var y,h,b,w,x,C,V,N;return{id:a.id,name:a.name,description:a.description,price:Number(a.price),originalPrice:Number(a.price)*1.2,image:((h=(y=a.product_images)==null?void 0:y.find(g=>g.is_primary))==null?void 0:h.image_url)||((w=(b=a.product_images)==null?void 0:b[0])==null?void 0:w.image_url)||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400&h=300&fit=crop",category:"Produk",rating:Math.floor(Math.random()*5)+1,reviews:Math.floor(Math.random()*10)+1,inStock:a.stock>0,stock:a.stock,tags:["produk"],featured:Math.random()>.5,primary_image:((C=(x=a.product_images)==null?void 0:x.find(g=>g.is_primary))==null?void 0:C.image_url)||((N=(V=a.product_images)==null?void 0:V[0])==null?void 0:N.image_url)||null}}),k.value=["Produk"],c.value=!1},A=async()=>{const{data:t,error:e}=await R.from("content").select("value").eq("section","contact").eq("key","wa").single();!e&&t&&p.setWhatsAppNumber(t.value)},B=(t,e=1)=>{p.addToCart(t,e)},F=t=>{r.value={...r.value,...t}};return E(()=>{q(),A()}),(t,e)=>(n(),d(H,null,[s(Q),o("div",ee,[o("div",te,[s(U,{class:"py-8",style:{"max-width":"1400px"}},{default:i(()=>[m.value?(n(),S(K,{key:0,type:"error",class:"mb-4"},{default:i(()=>[v(M(m.value),1)]),_:1})):I("",!0),c.value?(n(),d("div",ae,[s(Y,{indeterminate:"",color:"primary",size:"64"}),e[2]||(e[2]=o("div",{class:"mt-4"},"Memuat produk...",-1))])):(n(),S(O,{key:2},{default:i(()=>[s(P,{cols:"12",lg:"8"},{default:i(()=>[o("div",re,[e[3]||(e[3]=o("h1",{class:"text-h3 font-weight-bold"},"Showcase Produk",-1)),s(X,{color:"primary",size:"small"},{default:i(()=>[v(M(f.value.length)+" produk ditemukan ",1)]),_:1})]),f.value.length===0?(n(),d("div",se,[s(Z,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[5]||(e[5]=o("h3",{class:"text-h5 font-weight-medium mb-2"},"Tidak ada produk ditemukan",-1)),e[6]||(e[6]=o("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Coba sesuaikan kriteria pencarian atau filter Anda ",-1)),s(G,{color:"primary",variant:"tonal",onClick:e[0]||(e[0]=()=>{u.value="",r.value.priceRange=[0,1e6],r.value.minRating=0})},{default:i(()=>e[4]||(e[4]=[v(" Hapus semua filter ")])),_:1})])):(n(),d("div",oe,[s(z,{products:f.value,onAddToCart:B,cart:J(p).items},null,8,["products","cart"])]))]),_:1}),s(P,{cols:"12",lg:"4"},{default:i(()=>[s(L,{categories:k.value,filters:r.value,"search-query":u.value,"onUpdate:searchQuery":e[1]||(e[1]=a=>u.value=a),"onUpdate:filters":F},null,8,["categories","filters","search-query"])]),_:1})]),_:1}))]),_:1})]),s(W)])],64))}};export{Ae as default};
