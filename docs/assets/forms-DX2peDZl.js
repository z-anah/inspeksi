import{V as b}from"./VCardText-jeW53h4B.js";import{e as L}from"./VTextField-1zpl5kVc.js";import{V as k}from"./VCard-BHQaHQNf.js";import{f,o as l,e as a,b as t,d as n,c as p,F as C,h as S,t as g,a2 as q,r as c,W as V,D as N,l as Q,s as _,aU as U,Y as $,Z as B}from"./index-f130AbvA.js";import{V as M,a as A,b as T}from"./VList-jRAczw87.js";import{N as z,V as I,F as D}from"./front-page-navbar-CE4YbPU2.js";import{s as E}from"./supabase-LBwR8lXP.js";import{V as j}from"./VAlert-DES5KRZR.js";import{V as G,a as x}from"./VRow-B68zHpGp.js";import{V as H}from"./VChip-BMaDEeeR.js";import"./VImg-CQMCykrA.js";import"./forwardRefs-DWGaNmQL.js";import"./VAvatar-CivyU0h9.js";import"./VDivider-SQXlv0Yo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */import"./VNodeRenderer-DG_rnLeL.js";import"./vue3-perfect-scrollbar-DRkDldPO.js";import"./VBadge-B0Q6VV3a.js";import"./VTooltip-lI39WngV.js";import"./VOverlay-BbLV3tjp.js";import"./VMenu-BPxTqcwi.js";import"./VSpacer-CWZU6Bxm.js";import"./_commonjsHelpers-BosuxZz1.js";const K={__name:"forms-header-copy",props:{categories:{type:Array,required:!0},searchQuery:{type:String,default:""},filterCategory:{type:String,default:""}},emits:["update:searchQuery","update:filterCategory"],setup(y,{emit:v}){return(u,s)=>(l(),f(k,null,{default:a(()=>[t(b,{class:"pa-6"},{default:a(()=>[s[1]||(s[1]=n("h4",{class:"text-h6 font-weight-medium mb-4"},"Search Forms",-1)),t(L,{"model-value":y.searchQuery,"onUpdate:modelValue":s[0]||(s[0]=i=>u.$emit("update:searchQuery",i)),placeholder:"Search forms...","prepend-inner-icon":"tabler-search",variant:"outlined","hide-details":""},null,8,["model-value"])]),_:1})]),_:1}))}},P={class:"text-body-2 text-medium-emphasis me-2"},R=["href"],W={__name:"list-group-layout",props:{forms:{type:Array,required:!0}},setup(y){return(v,u)=>(l(),f(k,null,{default:a(()=>[t(b,{class:"pa-6"},{default:a(()=>[t(M,{class:"pa-0"},{default:a(()=>[(l(!0),p(C,null,S(y.forms,(s,i)=>(l(),f(A,{key:"list-"+s.id,class:"pa-0 mb-2"},{default:a(()=>[t(T,null,{default:a(()=>[n("span",P,g(i+1)+".",1),n("a",{href:s.url,target:"_blank",rel:"noopener",class:"text-primary text-decoration-none"},g(s.title),9,R)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}))}},Y={class:"forms-container"},Z={key:1,class:"text-center py-8"},J={class:"d-flex justify-space-between align-center mb-6"},O={key:0,class:"text-center py-8"},X={key:1,class:"d-flex flex-column ga-6"},Ce={__name:"forms",setup(y){const v=q();v.skin="default";const u=c([]),s=c(!1),i=c(""),m=c(""),d=c(""),w=V(()=>[...new Set(u.value.map(o=>o.category))]),h=V(()=>{let o=u.value;if(d.value&&(o=o.filter(e=>e.category===d.value)),m.value.trim()){const e=m.value.trim().toLowerCase();o=o.filter(r=>r.title.toLowerCase().includes(e)||r.description.toLowerCase().includes(e)||r.category.toLowerCase().includes(e))}return o}),F=async()=>{s.value=!0,i.value="";try{const{data:o,error:e}=await E.from("forms").select("*").eq("is_active",!0).order("id",{ascending:!0});if(e){i.value=e.message,console.error("Error fetching forms:",e);return}u.value=o.map(r=>({id:r.id,title:r.title,description:r.description,category:r.category||"Umum",url:r.link,image:r.image_url||`https://images.unsplash.com/photo-${Math.floor(Math.random()*1e9)}?w=400&h=200&fit=crop`,icon:r.icon||"tabler-forms"}))}catch(o){i.value="Gagal memuat formulir. Silakan coba lagi nanti.",console.error("Unexpected error:",o)}finally{s.value=!1}};return N(()=>{F()}),(o,e)=>(l(),p(C,null,[t(z),n("div",Y,[t(I,null,{default:a(()=>[i.value?(l(),f(j,{key:0,type:"error",class:"mb-4"},{default:a(()=>[_(g(i.value),1)]),_:1})):Q("",!0),s.value?(l(),p("div",Z,[t(U,{indeterminate:"",color:"primary",size:"64"}),e[3]||(e[3]=n("div",{class:"mt-4"},"Memuat formulir...",-1))])):(l(),f(G,{key:2},{default:a(()=>[t(x,{cols:"12",lg:"4"},{default:a(()=>[t(K,{categories:w.value,"search-query":m.value,"onUpdate:searchQuery":e[0]||(e[0]=r=>m.value=r),"filter-category":d.value,"onUpdate:filterCategory":e[1]||(e[1]=r=>d.value=r)},null,8,["categories","search-query","filter-category"])]),_:1}),t(x,{cols:"12",md:"8"},{default:a(()=>[n("div",J,[e[4]||(e[4]=n("h2",{class:"text-h4 font-weight-bold"},"Formulir Komunitas",-1)),t(H,{color:"primary",size:"small"},{default:a(()=>[_(g(h.value.length)+" formulir tersedia ",1)]),_:1})]),h.value.length===0&&!s.value?(l(),p("div",O,[t($,{icon:"tabler-search-off",size:"64",class:"text-medium-emphasis mb-4"}),e[6]||(e[6]=n("h3",{class:"text-h5 font-weight-medium mb-2"},"Formulir tidak ditemukan",-1)),e[7]||(e[7]=n("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Coba sesuaikan kriteria pencarian atau filter kategori Anda ",-1)),t(B,{color:"primary",variant:"tonal",onClick:e[2]||(e[2]=()=>{m.value="",d.value=""})},{default:a(()=>e[5]||(e[5]=[_(" Hapus semua filter ")])),_:1})])):(l(),p("div",X,[t(W,{forms:h.value},null,8,["forms"])]))]),_:1})]),_:1}))]),_:1})]),t(D)],64))}};export{Ce as default};
