import{s as $}from"./supabase-CWX7-f5Q.js";import{D as F,c as x,o as h,b as t,e as d,d as i,ag as W,a6 as R,a7 as N,a8 as M,aa as O,aU as X,W as z,aK as Z,p as H,a9 as K,aV as J,at as ee,X as S,aQ as te,aA as ae,aG as ie,aB as se,aR as le,ax as ne,Y as L,av as re,F as q,l as D,s as V,t as v,h as E,f as A,j as oe,G as ce,v as de,i as G,r as k,Z as C,a2 as ue,aT as me}from"./index-BVaCrnzn.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as B}from"./VCardText-C0u32w7U.js";import{V as I}from"./VCard-DP_E-bLX.js";import{V as U}from"./VChip-CTV-joSr.js";import{V as j}from"./VImg-NMXwL6VU.js";import{a as T,V as Q}from"./VRow-Bf1RpIGn.js";import{V as fe,a as ge}from"./VList-Dvybo9DS.js";import{F as ve}from"./front-page-footer-C8_XRPf9.js";import{N as he,V as pe}from"./front-page-navbar-CNf69CCQ.js";import{V as be}from"./VAlert-MBTrk8nU.js";import"./_commonjsHelpers-BosuxZz1.js";import"./VAvatar-CAUdbu1Q.js";/* empty css              */import"./VDivider-GgTk6SUH.js";import"./VNodeRenderer-BGktGJC_.js";import"./vue3-perfect-scrollbar-BbB_480w.js";import"./VBadge-iFakTt9B.js";import"./VTooltip-Cpmn-9Bt.js";import"./VOverlay-BHHiyy6m.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-BuGwhRKA.js";import"./VSpacer-Bit_ZuBw.js";const ye=["innerHTML"],xe={__name:"article-content",props:{content:{type:String,required:!0}},setup(e){const f=()=>{W(()=>{document.querySelectorAll(".article-content h1, .article-content h2, .article-content h3").forEach(l=>{const n=l.textContent.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");l.id=n})})};return F(()=>{f()}),(a,l)=>(h(),x("section",null,[t(I,null,{default:d(()=>[t(B,{class:"pa-8"},{default:d(()=>[i("div",{class:"article-content text-body-1",innerHTML:e.content,onVnodeUpdated:f},null,8,ye)]),_:1})]),_:1})]))}},ke=Y(xe,[["__scopeId","data-v-0a6251a5"]]),_e=N({divider:[Number,String],...O()},"VBreadcrumbsDivider"),we=R()({name:"VBreadcrumbsDivider",props:_e(),setup(e,f){let{slots:a}=f;return M(()=>{var l;return t("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((l=a==null?void 0:a.default)==null?void 0:l.call(a))??e.divider])}),{}}}),Ce=N({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...O(),...J(),...K({tag:"li"})},"VBreadcrumbsItem"),$e=R()({name:"VBreadcrumbsItem",props:Ce(),setup(e,f){let{slots:a,attrs:l}=f;const r=X(e,l),n=z(()=>{var c;return e.active||((c=r.isActive)==null?void 0:c.value)}),p=z(()=>n.value?e.activeColor:e.color),{textColorClasses:y,textColorStyles:m}=Z(p);return M(()=>t(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":n.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:n.value&&e.activeClass},y.value,e.class],style:[m.value,e.style],"aria-current":n.value?"page":void 0},{default:()=>{var c,o;return[r.isLink.value?t("a",H({class:"v-breadcrumbs-item--link",onClick:r.navigate},r.linkProps),[((o=a.default)==null?void 0:o.call(a))??e.title]):((c=a.default)==null?void 0:c.call(a))??e.title]}})),{}}}),Ve=N({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:ne,items:{type:Array,default:()=>[]},...O(),...le(),...se(),...K({tag:"ul"})},"VBreadcrumbs"),Ae=R()({name:"VBreadcrumbs",props:Ve(),setup(e,f){let{slots:a}=f;const{backgroundColorClasses:l,backgroundColorStyles:r}=ee(S(e,"bgColor")),{densityClasses:n}=te(e),{roundedClasses:p}=ae(e);ie({VBreadcrumbsDivider:{divider:S(e,"divider")},VBreadcrumbsItem:{activeClass:S(e,"activeClass"),activeColor:S(e,"activeColor"),color:S(e,"color"),disabled:S(e,"disabled")}});const y=z(()=>e.items.map(m=>typeof m=="string"?{item:{title:m},raw:m}:{item:m,raw:m}));return M(()=>{const m=!!(a.prepend||e.icon);return t(e.tag,{class:["v-breadcrumbs",l.value,n.value,p.value,e.class],style:[r.value,e.style]},{default:()=>{var c;return[m&&t("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?t(re,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):t(L,{key:"prepend-icon",start:!0,icon:e.icon},null)]),y.value.map((o,b,P)=>{var s;let{item:_,raw:u}=o;return t(q,null,[((s=a.item)==null?void 0:s.call(a,{item:_,index:b}))??t($e,H({key:b,disabled:b>=P.length-1},typeof _=="string"?{title:_}:_),{default:a.title?()=>{var g;return(g=a.title)==null?void 0:g.call(a,{item:_,index:b})}:void 0}),b<P.length-1&&t(we,null,{default:a.divider?()=>{var g;return(g=a.divider)==null?void 0:g.call(a,{item:u,index:b})}:void 0})])}),(c=a.default)==null?void 0:c.call(a)]}})}),{}}}),Se={class:"mb-6"},Be={class:"text-h3 font-weight-bold mb-2"},Ie={class:"text-h6 text-medium-emphasis mb-4"},Le={class:"d-flex align-center flex-wrap ga-4 mb-6"},ze={class:"d-flex align-center ga-4 text-body-2 text-medium-emphasis"},De={class:"d-flex align-center ga-1"},Pe={class:"d-flex align-center ga-1"},Te={class:"d-flex align-center ga-1"},qe={class:"d-flex flex-wrap ga-2 mt-4 mb-4"},je={key:0,class:"text-body-1 text-medium-emphasis mb-4"},Re={__name:"article-header",props:{article:{type:Object,required:!0}},setup(e){return(f,a)=>(h(),x("section",null,[t(Ae,{items:[{title:"Beranda",to:"/"},{title:"Artikel",to:"/articles",disabled:!1}],class:"pa-0 mb-4"}),i("div",Se,[t(U,{color:"primary",size:"small",class:"mb-3"},{default:d(()=>[V(v(e.article.category),1)]),_:1}),i("h1",Be,v(e.article.title),1),i("p",Ie,v(e.article.subtitle),1),i("div",Le,[i("div",ze,[i("div",De,[t(L,{icon:"tabler-calendar",size:"16"}),V(" "+v(e.article.date),1)]),i("div",Pe,[t(L,{icon:"tabler-clock",size:"16"}),V(" "+v(e.article.readingTime),1)]),i("div",Te,[t(L,{icon:"tabler-eye",size:"16"}),V(" "+v(e.article.views),1)])])]),t(j,{src:e.article.featuredImage,alt:e.article.title,height:"400",class:"rounded",cover:""},null,8,["src","alt"]),i("div",qe,[(h(!0),x(q,null,E(e.article.tags,l=>(h(),A(U,{key:l,size:"small",variant:"outlined"},{default:d(()=>[V(" #"+v(l),1)]),_:2},1024))),128))]),e.article.excerpt?(h(),x("p",je,v(e.article.excerpt),1)):D("",!0)])]))}},Ne={style:{width:"60px",height:"60px"}},Me={class:"flex-grow-1 text-right"},Oe={class:"text-body-1 font-weight-medium"},Ue={class:"flex-grow-1"},Fe={class:"text-body-1 font-weight-medium"},He={style:{width:"60px",height:"60px"}},Ke={__name:"article-navigation",props:{navigation:{type:Object,required:!0}},setup(e){const f=oe(),a=async l=>{await f.push(`/articles/${l}`),f.go(0)};return(l,r)=>(h(),x("section",null,[t(Q,null,{default:d(()=>[e.navigation.previous?(h(),A(T,{key:0,cols:"12",md:"6"},{default:d(()=>[t(I,{class:"h-100 cursor-pointer",hover:"",onClick:r[0]||(r[0]=n=>a(e.navigation.previous.id))},{default:d(()=>[t(B,{class:"d-flex ga-3"},{default:d(()=>[i("div",Ne,[t(j,{src:e.navigation.previous.image,alt:e.navigation.previous.title,width:"60",height:"60",class:"flex-shrink-0 rounded",cover:""},null,8,["src","alt"])]),i("div",Me,[r[2]||(r[2]=i("p",{class:"text-caption text-medium-emphasis mb-1"},"Artikel Sebelumnya",-1)),i("h4",Oe,v(e.navigation.previous.title),1)])]),_:1})]),_:1})]),_:1})):D("",!0),e.navigation.next?(h(),A(T,{key:1,cols:"12",md:"6"},{default:d(()=>[t(I,{class:"h-100 cursor-pointer",hover:"",onClick:r[1]||(r[1]=n=>a(e.navigation.next.id))},{default:d(()=>[t(B,{class:"d-flex ga-3"},{default:d(()=>[i("div",Ue,[r[3]||(r[3]=i("p",{class:"text-caption text-medium-emphasis mb-1"},"Artikel Selanjutnya",-1)),i("h4",Fe,v(e.navigation.next.title),1)]),i("div",He,[t(j,{src:e.navigation.next.image,alt:e.navigation.next.title,width:"60",height:"60",class:"flex-shrink-0 rounded",cover:""},null,8,["src","alt"])])]),_:1})]),_:1})]),_:1})):D("",!0)]),_:1})]))}},Ee=Y(Ke,[["__scopeId","data-v-5cbb59fd"]]),Ge={class:"d-flex flex-column ga-6 position-sticky",style:{top:"2rem"}},Ye={class:"d-flex flex-column ga-3"},Qe={class:"d-flex justify-space-between"},We={class:"font-weight-medium"},Xe={class:"d-flex justify-space-between"},Ze={class:"font-weight-medium"},Je={class:"d-flex justify-space-between"},et={class:"font-weight-medium"},tt={__name:"article-sidebar",props:{article:{type:Object,required:!0}},setup(e){const f=e,a=z(()=>{if(!f.article.content)return[];const p=new DOMParser().parseFromString(f.article.content,"text/html").querySelectorAll("h1, h2, h3");return Array.from(p).map((y,m)=>{const c=y.textContent,o=parseInt(y.tagName.charAt(1)),b=`#${c.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`;return{title:c,anchor:b,level:o,indent:o>1?(o-1)*16:0}})}),l=r=>{const n=document.querySelector(r);if(n){const m=n.getBoundingClientRect().top+window.pageYOffset/1.03-80;window.scrollTo({top:m,behavior:"smooth"})}};return(r,n)=>(h(),x("div",Ge,[a.value.length>0?(h(),A(I,{key:0},{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[n[0]||(n[0]=i("h4",{class:"text-h6 font-weight-medium mb-4"},"Daftar Isi",-1)),t(fe,{class:"pa-0"},{default:d(()=>[(h(!0),x(q,null,E(a.value,p=>(h(),A(ge,{key:p.anchor,class:"pa-2 text-body-2 cursor-pointer",style:ce({paddingLeft:`${16+p.indent}px`}),onClick:y=>l(p.anchor)},{default:d(()=>[i("span",{class:de(["text-high-emphasis",p.level===1?"font-weight-medium":""])},v(p.title),3)]),_:2},1032,["style","onClick"]))),128))]),_:1})]),_:1})]),_:1})):D("",!0),t(I,null,{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[n[4]||(n[4]=i("h4",{class:"text-h6 font-weight-medium mb-4"},"Statistik Artikel",-1)),i("div",Ye,[i("div",Qe,[n[1]||(n[1]=i("span",{class:"text-body-2"},"Tampilan",-1)),i("span",We,v(e.article.views),1)]),i("div",Xe,[n[2]||(n[2]=i("span",{class:"text-body-2"},"Suka",-1)),i("span",Ze,v(e.article.likes),1)]),i("div",Je,[n[3]||(n[3]=i("span",{class:"text-body-2"},"Bagikan",-1)),i("span",et,v(e.article.shares),1)])])]),_:1})]),_:1})]))}},at={class:"d-flex justify-space-between align-center flex-wrap ga-4"},it={class:"d-flex align-center ga-4"},st={class:"d-flex align-center ga-2"},lt={class:"text-body-2"},nt={class:"d-flex align-center ga-2"},rt={class:"text-body-2"},ot={class:"d-flex align-center ga-2"},ct={class:"text-body-2"},dt={class:"d-flex ga-2"},ut={__name:"sharing-section",props:{article:{type:Object,required:!0}},emits:["update-stats"],setup(e,{emit:f}){const a=e,l=f;G();const r=k(!1),n=k(!1),p=z(()=>{const c=window.location.href,o=encodeURIComponent(a.article.title);return{twitter:`https://twitter.com/intent/tweet?url=${c}&text=${o}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${c}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${c}`}}),y=async()=>{if(!r.value){r.value=!0;try{const c=a.article.likes+1,{error:o}=await $.from("articles").update({likes:c}).eq("id",a.article.id);o||l("update-stats",{likes:c})}catch(c){console.error("Error updating likes:",c)}finally{r.value=!1}}},m=async c=>{if(!n.value){n.value=!0;try{const o=a.article.shares+1,{error:b}=await $.from("articles").update({shares:o}).eq("id",a.article.id);b||l("update-stats",{shares:o}),window.open(p.value[c],"_blank","width=600,height=400")}catch(o){console.error("Error updating shares:",o)}finally{n.value=!1}}};return(c,o)=>(h(),x("section",null,[t(I,null,{default:d(()=>[t(B,{class:"pa-6"},{default:d(()=>[i("div",at,[i("div",it,[i("div",st,[t(C,{icon:"tabler-eye",variant:"outlined",size:"small"}),i("span",lt,v(e.article.views.toLocaleString()),1)]),i("div",nt,[t(C,{icon:"tabler-heart",variant:"outlined",size:"small",loading:r.value,onClick:y,color:"error"},null,8,["loading"]),i("span",rt,v(e.article.likes.toLocaleString()),1)]),i("div",ot,[t(C,{icon:"tabler-share",variant:"outlined",size:"small"}),i("span",ct,v(e.article.shares.toLocaleString()),1)])]),i("div",dt,[t(C,{icon:"tabler-brand-twitter",variant:"tonal",size:"small",color:"info",loading:n.value,onClick:o[0]||(o[0]=b=>m("twitter"))},null,8,["loading"]),t(C,{icon:"tabler-brand-facebook",variant:"tonal",size:"small",color:"primary",loading:n.value,onClick:o[1]||(o[1]=b=>m("facebook"))},null,8,["loading"]),t(C,{icon:"tabler-brand-linkedin",variant:"tonal",size:"small",color:"info",loading:n.value,onClick:o[2]||(o[2]=b=>m("linkedin"))},null,8,["loading"])])])]),_:1})]),_:1})]))}},mt={class:"article-page-wrapper"},ft={class:"article-container"},gt={key:1,class:"d-flex justify-center align-center py-12"},vt={class:"d-flex flex-column ga-8"},ht={key:3,class:"text-center py-12"},Ot={__name:"[id]",setup(e){const f=ue();f.skin="default";const a=G(),l=k(null),r=k([]),n=k([]),p=k({}),y=k(!0),m=k(""),c=async u=>{try{const{data:s,error:g}=await $.from("articles").select("*").eq("id",u).single();if(g)throw g;l.value={id:s.id,title:s.title,subtitle:s.subtitle||"",excerpt:s.excerpt||"",author:{name:s.author_name||"Anonim",role:"Kontributor",avatar:s.author_avatar||"https://api.dicebear.com/9.x/notionists/svg?randomizeIds=false",bio:s.author_bio||"Kontributor komunitas dan penulis.",socialLinks:{twitter:"@kontributor",linkedin:"kontributor"}},date:new Date(s.published_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),readingTime:`${Math.max(1,Math.ceil((s.excerpt||"").length/200))} menit baca`,category:s.type||"Umum",tags:["komunitas","berita"],featuredImage:s.image_url||"https://images.unsplash.com/photo-1560472355-536de3962603?w=800&h=400&fit=crop",content:Array.isArray(s.content)?s.content.map(w=>`<p>${w}</p>`).join(""):"<p>Konten tidak tersedia</p>",views:s.views||0,likes:s.likes||0,shares:s.shares||0,comments:Math.floor(Math.random()*30)},await $.from("articles").update({views:(s.views||0)+1}).eq("id",u)}catch(s){m.value=s.message}},o=async(u,s)=>{const{data:g}=await $.from("articles").select("*").eq("type",s).neq("id",u).limit(3);g&&(r.value=g.map(w=>({id:w.id,title:w.title,excerpt:w.excerpt||"Baca selengkapnya tentang topik ini...",image:w.image_url||"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=300&h=200&fit=crop",date:new Date(w.published_at).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"}),readingTime:"5 menit baca"})))},b=async u=>{const{data:s}=await $.from("articles").select("id, title, image_url").lt("id",u).order("id",{ascending:!1}).limit(1),{data:g}=await $.from("articles").select("id, title, image_url").gt("id",u).order("id",{ascending:!0}).limit(1);p.value={previous:s!=null&&s[0]?{id:s[0].id,title:s[0].title,image:s[0].image_url||"https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=100&h=100&fit=crop"}:null,next:g!=null&&g[0]?{id:g[0].id,title:g[0].title,image:g[0].image_url||"https://images.unsplash.com/photo-1523240795612-9a054b0db644?w=100&h=100&fit=crop"}:null}},P=async u=>{n.value=[{id:1,author:"Anggota Komunitas",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=50&h=50&fit=crop&crop=face",date:"2 jam yang lalu",content:"Artikel yang bagus! Sangat informatif.",likes:5,replies:[]}]},_=u=>{l.value&&(u.likes!==void 0&&(l.value.likes=u.likes),u.shares!==void 0&&(l.value.shares=u.shares),u.views!==void 0&&(l.value.views=u.views))};return F(async()=>{const u=a.params.id;y.value=!0,await c(u),l.value&&await Promise.all([o(u,l.value.category),b(u),P()]),y.value=!1}),(u,s)=>(h(),x(q,null,[t(he),i("div",mt,[i("div",ft,[t(pe,{class:"py-8",style:{"max-width":"1400px"}},{default:d(()=>[m.value?(h(),A(be,{key:0,type:"error",class:"mb-4"},{default:d(()=>[V(v(m.value),1)]),_:1})):D("",!0),y.value?(h(),x("div",gt,[t(me,{indeterminate:"",color:"primary",size:"48"})])):l.value?(h(),A(Q,{key:2},{default:d(()=>[t(T,{cols:"12",lg:"8"},{default:d(()=>[i("div",vt,[t(Re,{article:l.value},null,8,["article"]),t(ke,{content:l.value.content},null,8,["content"]),t(ut,{article:l.value,onUpdateStats:_},null,8,["article"]),t(Ee,{navigation:p.value},null,8,["navigation"])])]),_:1}),t(T,{cols:"12",lg:"4"},{default:d(()=>[t(tt,{article:l.value},null,8,["article"])]),_:1})]),_:1})):(h(),x("div",ht,[t(L,{icon:"tabler-article-off",size:"64",class:"text-medium-emphasis mb-4"}),s[1]||(s[1]=i("h2",{class:"text-h4 mb-2"},"Artikel Tidak Ditemukan",-1)),s[2]||(s[2]=i("p",{class:"text-body-1 text-medium-emphasis mb-4"}," Artikel yang Anda cari tidak ada atau telah dihapus. ",-1)),t(C,{to:"/articles",color:"primary"},{default:d(()=>s[0]||(s[0]=[V(" Kembali ke Artikel ")])),_:1})]))]),_:1})]),t(ve)])],64))}};export{Ot as default};
